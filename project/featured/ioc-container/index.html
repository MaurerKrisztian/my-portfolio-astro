<!DOCTYPE html><link rel="stylesheet" href="/assets/901a9090.6c3cc81b.css" />
<link rel="stylesheet" href="/assets/3d0cb808.5864f3d6.css" /><script type="module" src="/hoisted.e681e719.js"></script><html lang="en" class="astro-FNBAIWJC">
	<head>
		<meta charset="UTF-8">

<meta name="title" property="og:title" content="Maurer Krisztián: Personal Site">
<meta name="description" property="og:description" content="Hi , I'm Maurer Krisztian · A passionate full stack developer from Hungary · Connect with me: · CV: · Blog: · Discord: · Languages and Tools:.">
<meta property="og:image" content="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/8sm83mcibpxa0giedjfo.jpg">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="generator" content="Astro v1.0.3">
<title>Dependency injection container (IoC)</title>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7EC4B0NZ4G"></script>


<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;400;700;900&display=swap" rel="stylesheet">

		
	<link rel="stylesheet" href="/assets/901a9090.6c3cc81b.css" />
<link rel="stylesheet" href="/assets/3d0cb808.5864f3d6.css" /><script type="module" src="/hoisted.e681e719.js"></script></head>
	<body class="astro-FNBAIWJC">
		<nav class="_nav_1tpto_1"><a class="_logolink_1tpto_11" href="/"><div class="_monogram_1tpto_31">MK</div></a><a class="_link_1tpto_17" href="/">About me &amp; work</a><a class="_link_1tpto_17" href="/projects">projects</a><a class="_link_1tpto_17" href="/blog">Blog</a><a class="_link_1tpto_17" href="/book-review">Books</a><a class="_link_1tpto_17" href="/contact">Contact me</a></nav>
		<header style="background-image:url(https://user-images.githubusercontent.com/48491140/201497104-1836aea0-27cc-42fa-909c-26219dda6d61.png)" class="hero astro-FNBAIWJC">
			<h1 class="title astro-FNBAIWJC">Dependency injection container (IoC)</h1>
		</header>
		<div class="leadIn astro-FNBAIWJC">
			<div class="wrapper pt8 pb8 mb8 tac astro-FNBAIWJC">
				<span class="tag astro-FNBAIWJC">TypeScript</span><span class="tag astro-FNBAIWJC">TypeScript Decorators</span><span class="tag astro-FNBAIWJC">Dependency injection</span>
				<h3 class="tagline astro-FNBAIWJC">General purpose dependency injection framework, focused on simplicity and extendability.</h3>
			</div>
		</div>
		<div class="wrapper wrapper__readable astro-FNBAIWJC">
			<div class="content astro-FNBAIWJC"><p><img src="https://user-images.githubusercontent.com/48491140/201497104-1836aea0-27cc-42fa-909c-26219dda6d61.png" alt="DALL·E 2022-11-12 23 28 30 - Pizza with code bacground, cyberpunk style (1) (1)"></p>
<h1 id="type-chef-di-">type-chef-di <a href="https://www.npmjs.com/package/type-chef-di"><img src="https://img.shields.io/npm/v/type-chef-di" alt="npm version"></a> <img src="https://img.shields.io/npm/dw/type-chef-di" alt="NPM Downloads"></h1>
<p><a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/images/project_badges/sonarcloud-black.svg" alt="SonarCloud"></a></p>
<p><a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/api/project_badges/measure?project=OpenZer0_type-chef-di&#x26;metric=bugs" alt="Bugs"></a>
<a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/api/project_badges/measure?project=OpenZer0_type-chef-di&#x26;metric=code_smells" alt="Code Smells"></a>
<a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/api/project_badges/measure?project=OpenZer0_type-chef-di&#x26;metric=duplicated_lines_density" alt="Duplicated Lines (%)"></a>
<a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/api/project_badges/measure?project=OpenZer0_type-chef-di&#x26;metric=ncloc" alt="Lines of Code"></a>
<a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/api/project_badges/measure?project=OpenZer0_type-chef-di&#x26;metric=sqale_rating" alt="Maintainability Rating"></a>
<a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/api/project_badges/measure?project=OpenZer0_type-chef-di&#x26;metric=reliability_rating" alt="Reliability Rating"></a>
<a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/api/project_badges/measure?project=OpenZer0_type-chef-di&#x26;metric=security_rating" alt="Security Rating"></a>
<a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/api/project_badges/measure?project=OpenZer0_type-chef-di&#x26;metric=sqale_index" alt="Technical Debt"></a>
<a href="https://sonarcloud.io/summary/new_code?id=OpenZer0_type-chef-di"><img src="https://sonarcloud.io/api/project_badges/measure?project=OpenZer0_type-chef-di&#x26;metric=vulnerabilities" alt="Vulnerabilities"></a></p>
<h2 id="type-chef-di-is-a-general-purpose-dependency-injection-framework-focused-on-simplicity-and-extendability">Type-chef-di is a general purpose dependency injection framework, focused on simplicity and extendability.</h2>
<h3 id="documentation-httpszer0-2gitbookiotype-chef-di">Documentation: <a href="https://zer0-2.gitbook.io/type-chef-di">https://zer0-2.gitbook.io/type-chef-di</a></h3>
<h3 id="setup">Setup:</h3>
<p>tsconfig.json:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">{</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">"experimentalDecorators"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">"emitDecoratorMetadata"</span><span style="color: #C9D1D9">: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">"target"</span><span style="color: #C9D1D9">: </span><span style="color: #A5D6FF">"es6"</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span></code></pre>
<p>Install the npm package:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">npm install type-chef-di</span></span></code></pre>
<p><a href="https://www.npmjs.com/package/type-chef-di">https://www.npmjs.com/package/type-chef-di</a></p>
<p>One of the feature that may be interesting for you is the Type resolution. essentially, you can resolve types without registering them to the DI. The DI container will try to resolve by looking the constructor param types recuresively.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">import</span><span style="color: #C9D1D9"> { Container, Injectable } </span><span style="color: #FF7B72">from</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"type-chef-di"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">Injectable</span><span style="color: #C9D1D9">()</span></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">SayService</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">public</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getString</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"pizza"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">Injectable</span><span style="color: #C9D1D9">()</span></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">SayService2</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">public</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">getString</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">"coffee"</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">Injectable</span><span style="color: #C9D1D9">()</span></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Client</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">constructor</span><span style="color: #C9D1D9">(</span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">readonly</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">sayService</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">SayService</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">                </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">readonly</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">sayService2</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">SayService2</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">public</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">say</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">`I like ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">sayService</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">getString</span><span style="color: #A5D6FF">()</span><span style="color: #A5D6FF">} and ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">sayService2</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">getString</span><span style="color: #A5D6FF">()</span><span style="color: #A5D6FF">}`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">Injectable</span><span style="color: #C9D1D9">({instantiation: </span><span style="color: #A5D6FF">"singleton"</span><span style="color: #C9D1D9">})</span></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Service</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">constructor</span><span style="color: #C9D1D9">(</span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">readonly</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">client</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Client</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">public</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">check</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">`client says: ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">client</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">say</span><span style="color: #A5D6FF">()</span><span style="color: #A5D6FF">}`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">run</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">container</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Container</span><span style="color: #C9D1D9">({enableAutoCreate: </span><span style="color: #79C0FF">true</span><span style="color: #C9D1D9">});</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">service</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> container.</span><span style="color: #D2A8FF">resolveByType</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">Service</span><span style="color: #C9D1D9">>(Service); </span><span style="color: #8B949E">// new Service(new Client(new SayService(), new SayService2()));</span></span>
<span class="line"><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(service.</span><span style="color: #D2A8FF">check</span><span style="color: #C9D1D9">()); </span><span style="color: #8B949E">// client says: I like pizza and coffee</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D2A8FF">run</span><span style="color: #C9D1D9">();</span></span></code></pre>
<p>You can choose the instantiation mode: singleton / new instance.</p>
<p>but if you want to use interfaces, you can do so with this automatic resolution just use the @Inject decorator with the type.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #D2A8FF">constructor</span><span style="color: #C9D1D9">(@</span><span style="color: #D2A8FF">Inject</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">IOptions</span><span style="color: #C9D1D9">>(OptionClass) options: IOptions,</span></span>
<span class="line"><span style="color: #C9D1D9"> @</span><span style="color: #D2A8FF">Inject</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">IOptions</span><span style="color: #C9D1D9">>(OptionClass2) options2: IOptions) {}</span></span></code></pre>
<p>Registration process can be manual or automatic.
Manually eg container.register(“key”, value), .registerTypes([Service, FoodFactory])
then you can inject the registered key into the constructor with the Inject(‘key’) decorator.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Service</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">constructor</span><span style="color: #C9D1D9">(@</span><span style="color: #D2A8FF">Inject</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"serviceStr"</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">readonly</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">value</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">) {</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">public</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">say</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">`${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">value</span><span style="color: #A5D6FF">}`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Client</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">constructor</span><span style="color: #C9D1D9">(</span></span>
<span class="line"><span style="color: #C9D1D9">             @</span><span style="color: #D2A8FF">Inject</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"clientStr"</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">readonly</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">value</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">,</span></span>
<span class="line"><span style="color: #C9D1D9">             @</span><span style="color: #D2A8FF">Inject</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"service"</span><span style="color: #C9D1D9">) </span><span style="color: #FF7B72">private</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">readonly</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">service</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Service</span><span style="color: #C9D1D9"> </span><span style="color: #8B949E">// or  @Inject&#x3C;IService>(Service)</span></span>
<span class="line"><span style="color: #C9D1D9">             ) {</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">public</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">say</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> </span><span style="color: #A5D6FF">`I like ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">value</span><span style="color: #A5D6FF">} and ${</span><span style="color: #79C0FF">this</span><span style="color: #A5D6FF">.</span><span style="color: #C9D1D9">service</span><span style="color: #A5D6FF">.</span><span style="color: #D2A8FF">say</span><span style="color: #A5D6FF">()</span><span style="color: #A5D6FF">}`</span><span style="color: #C9D1D9">;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">run</span><span style="color: #C9D1D9">() {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">container</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Container</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    container.</span><span style="color: #D2A8FF">register</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"clientStr"</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">"coffee"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">asConstant</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    container.</span><span style="color: #D2A8FF">register</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"serviceStr"</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">"pizza"</span><span style="color: #C9D1D9">).</span><span style="color: #D2A8FF">asConstant</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    container.</span><span style="color: #D2A8FF">register</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"service"</span><span style="color: #C9D1D9">, Service).</span><span style="color: #D2A8FF">asPrototype</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    container.</span><span style="color: #D2A8FF">register</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"client"</span><span style="color: #C9D1D9">, Client).</span><span style="color: #D2A8FF">asSingleton</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">service</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> container.</span><span style="color: #D2A8FF">resolve</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">Client</span><span style="color: #C9D1D9">>(</span><span style="color: #A5D6FF">"client"</span><span style="color: #C9D1D9">); </span><span style="color: #8B949E">// new Service('pizza');</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">service2</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> container.</span><span style="color: #D2A8FF">resolveByType</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">Client</span><span style="color: #C9D1D9">>(Client); </span><span style="color: #8B949E">// new Client('coffee', new Service('pizza'));</span></span>
<span class="line"><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(service.</span><span style="color: #D2A8FF">say</span><span style="color: #C9D1D9">()); </span><span style="color: #8B949E">// client says: I like pizza and coffee</span></span>
<span class="line"><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(service2.</span><span style="color: #D2A8FF">say</span><span style="color: #C9D1D9">()); </span><span style="color: #8B949E">// client says: I like pizza and coffee</span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D2A8FF">run</span><span style="color: #C9D1D9">();</span></span></code></pre>
<p>If you want more control over the injection process you can use the token injection. This lets you inject the value that you registered.</p>
<p>The DI can’t resolve automatically the primitive types / interfaces: eg. string, number, interfaces… You must specify  the value and use the @Inject decorator for that</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #D2A8FF">constructor</span><span style="color: #C9D1D9">(service: Service,</span></span>
<span class="line"><span style="color: #C9D1D9"> @</span><span style="color: #D2A8FF">Inject</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">'options'</span><span style="color: #C9D1D9">) options: IOptions)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D2A8FF">constructor</span><span style="color: #C9D1D9">(service: Service,</span></span>
<span class="line"><span style="color: #C9D1D9"> @</span><span style="color: #D2A8FF">Inject</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">IOptions</span><span style="color: #C9D1D9">>(OptionClass) options: IOptions,</span></span>
<span class="line"><span style="color: #C9D1D9"> @</span><span style="color: #D2A8FF">Inject</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">IOptions</span><span style="color: #C9D1D9">>(OptionClass2) options2: IOptions)</span></span></code></pre>
<p>Explanation:</p>
<p><code>service: Service</code>: if {enableAutoCreate: true} you don’t have to do anything it will register and resolve automatically. if false you need to register before resolution eg container.registerByType(Service)  but you can inject it with @Inject if you want.</p>
<p><code>@Inject('options') options: IOptions</code> - this cannot be resolved automatically because this is just a general interface (IOptions), you need to specify (by registering) a token eg ‘option’ and inject via @Inject(“key”)</p>
<p><code>@Inject(OptionClass) options: IOptions, @Inject&#x3C;IOptions>(OptionClass2) options2: IOptions)</code>  - You can directly specify the class that you want to inject, this way you don’t need to register the OptionClass (the generic will check the passed type correctness)</p>
<p>If the key is not registered, the resolution process will fail.
You can check the container after you finished the configuration:
container.done()
This will try to resolve all the registered keys, and types.</p>
<p>After instatniation you can also run Initializers eg. MethodWrapper, RunBefore, InitMethod erc. or you can easily create your own.</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #FF7B72">export</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">MeasureWrapper</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">implements</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">IMethodWrapper</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">constructor</span><span style="color: #C9D1D9">() { </span><span style="color: #8B949E">// DI will resolve dependencies (type &#x26; key injection)</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">async</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">run</span><span style="color: #C9D1D9">(</span><span style="color: #D2A8FF">next</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Function</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">params</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">any</span><span style="color: #C9D1D9">[]) {</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #8B949E">// run code before</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">start</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Date</span><span style="color: #C9D1D9">().</span><span style="color: #D2A8FF">getTime</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">        </span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #8B949E">// call original fn</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">res</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">await</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">next</span><span style="color: #C9D1D9">() </span><span style="color: #8B949E">// (params automatically added)</span></span>
<span class="line"><span style="color: #C9D1D9">        </span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #8B949E">//run code after</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">end</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Date</span><span style="color: #C9D1D9">().</span><span style="color: #D2A8FF">getTime</span><span style="color: #C9D1D9">();</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">const</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">time</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> end </span><span style="color: #FF7B72">-</span><span style="color: #C9D1D9"> start;</span></span>
<span class="line"><span style="color: #C9D1D9">        console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">`Execution time: ${</span><span style="color: #C9D1D9">time</span><span style="color: #A5D6FF">} ms`</span><span style="color: #C9D1D9">)</span></span>
<span class="line"><span style="color: #C9D1D9">        </span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #8B949E">// return fn result</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> res;</span></span>
<span class="line"><span style="color: #C9D1D9">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">class</span><span style="color: #C9D1D9"> </span><span style="color: #FFA657">Test</span><span style="color: #C9D1D9"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C9D1D9">    @</span><span style="color: #D2A8FF">MeasureWrapper</span><span style="color: #C9D1D9">(MeasureWrapper) </span><span style="color: #8B949E">// or use registerd string key</span></span>
<span class="line"><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">p1</span><span style="color: #FF7B72">:</span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">p2</span><span style="color: #FF7B72">:</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">string</span><span style="color: #C9D1D9">){</span></span>
<span class="line"><span style="color: #C9D1D9">        console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">"original fn: "</span><span style="color: #C9D1D9">, p1, p2)</span></span>
<span class="line"><span style="color: #C9D1D9">        </span><span style="color: #8B949E">// ...</span></span>
<span class="line"><span style="color: #C9D1D9">    }       </span></span>
<span class="line"><span style="color: #C9D1D9">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #8B949E">/* After Test.foo is called</span></span>
<span class="line"><span style="color: #8B949E"> it will log the  `Execution time: ${time} ms` because of the @MeasureWrapper */</span></span>
<span class="line"><span style="color: #C9D1D9"> </span></span>
<span class="line"></span></code></pre>
<p>There are a few more features:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">RunBefore</span><span style="color: #C9D1D9">(key: string </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> Type</span><span style="color: #FF7B72">&#x3C;</span><span style="color: #C9D1D9">IRunBefore</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">) </span><span style="color: #8B949E">// run before method call</span></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">RunAfter</span><span style="color: #C9D1D9">(key: string </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> Type</span><span style="color: #FF7B72">&#x3C;</span><span style="color: #C9D1D9">IRunAfter</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">) </span><span style="color: #8B949E">// run after method call</span></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">AddTags</span><span style="color: #C9D1D9">(tags) </span><span style="color: #8B949E">// resolve tagged classes</span></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">InitMethod</span><span style="color: #C9D1D9">() </span><span style="color: #8B949E">// run init fuction after instantiation</span></span>
<span class="line"><span style="color: #C9D1D9">@</span><span style="color: #D2A8FF">InjectProperty</span><span style="color: #C9D1D9">&#x3C;</span><span style="color: #FFA657">T</span><span style="color: #C9D1D9">>(key: string </span><span style="color: #FF7B72">|</span><span style="color: #C9D1D9"> Type</span><span style="color: #FF7B72">&#x3C;</span><span style="color: #79C0FF">T</span><span style="color: #FF7B72">></span><span style="color: #C9D1D9">) </span><span style="color: #8B949E">// @Inject just for class props</span></span></code></pre>
<p>I tried to keep this readme short, if you are interested, check the documentation <a href="https://zer0-2.gitbook.io/type-chef-di/">https://zer0-2.gitbook.io/type-chef-di/</a></p>
<h2 id="contribution">Contribution</h2>
<p>All contributions are welcome ❤️</p>
<p>Check out the <a href="https://github.com/OpenZer0/type-chef-di/issues">issues</a> or improve the test coverage</p>
<p>Test coverage(main): <a href="https://type-chef-di-coverage.netlify.app/">https://type-chef-di-coverage.netlify.app/</a></p>
<h3 id="documentation">Documentation</h3>
<p><a href="https://zer0-2.gitbook.io/type-chef-di/">https://zer0-2.gitbook.io/type-chef-di/</a></p>
<p>There are still things to improve and document, you can help,
if you would like to improve the documentation, click on the “edit on GitHub” button and make a pull request.</p>
<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/yvztdtigbpibxyjhiby7.png" alt="Maurer Krisztián"></p></div>
		</div>
		<footer class="tac mt6 astro-FNBAIWJC">
			<a href="/projects" class="astro-FNBAIWJC">
				<span class="_button_1fbb5_1">View More</span>
			</a>
		</footer>
		<footer class="_footer_knfx6_1">© 2023 Maurer Krisztián<small class="_byline_knfx6_9">🚀 Built by Astro</small></footer>
	</body></html>